sumeru.config({httpServerPort:8080,sumeruPath:"/../sumeru"}),sumeru.router.add({pattern:"/index",action:"App.index"}),sumeru.router.setDefault("App.index"),App.index=sumeru.controller.create(function(e,t){e.onrender=function(e){e("index",["push","left"])},e.onready=function(){Library.touch.on("#scan_qr","touchstart",n)};var n=function(){clouda.device.qr.startCapture({onsuccess:function(e){console.log("success",e)},onfail:function(e){console.log("fail",e)},type:clouda.device.QR_TYPE.QRCODE})}}),sumeru.router.add({pattern:"/store",action:"App.pushStore"}),App.pushStore=sumeru.controller.create(function(e,t){var n=function(e){console.log("start```````````````"),console.log(e),console.log("end`````````````````")},r=function(){try{t.Store=e.subscribe("pub-pushStoreAll",function(e){t.bind("storeinfo_container",{data:e.find()})})}catch(r){n(r.name+":"+r.message)}};e.onload=function(){n("onload end");try{var e=sumeru.collection.create({modelName:"Model.pushStore"}),t=sumeru.model.create("Model.pushStore")}catch(i){console.log(i.name+":"+i.message)}return[r]},e.onrender=function(e){try{e("testStore",["push","left"]),n("render end")}catch(t){console.log(t.name+":"+t.message)}};var i=function(e){return document.getElementById(e)};e.onready=function(){}}),sumeru.router.add({pattern:"/waitStore",action:"App.waitStore"}),App.waitStore=sumeru.controller.create(function(e,t){var n=function(e){console.log("start```````````````"),console.log(e),console.log("end`````````````````")},r=function(e,t){var n=0;for(n=0;n<e.length&&!(e[n]>=t);n++);return n},i=function(){return{name:"海底捞",type:"",coordinate:[],description:"",num_perhour:10,waiting_queue:[166,167,168,169,170],picture:""}},o=function(e,t){var n=r(e.waiting_queue,t),i=1*n/e.num_perhour*60,o={store_name:e.name,time_to_wait:i,user_id:t,num_front:n,picture:e.picture};return o},a=function(){try{t.Store=e.subscribe("pub-waitStoreAll",function(e){var n=parseInt(t.get("storeid")),r=parseInt(t.get("waitnum")),i=o(e.find({id:n})[0],r);t.waittime=i.time_to_wait,t.bind("waitinfo_container",{waitinfo:i})})}catch(r){n(r.name+":"+r.message)}},s=function(){try{t.Store=e.subscribe("pub-pushStoreAll",function(e){})}catch(r){n(r.name+":"+r.message)}};e.onload=function(){n("onload end");try{var e=sumeru.collection.create({modelName:"Model.waitStore"}),t=sumeru.model.create("Model.waitStore")}catch(r){console.log(r.name+":"+r.message)}return[a,s]},e.onrender=function(e){try{t.bind("storeinfo_container",{data:t.Store.find(),waittime:t.waittime}),e("testWaitStore",["push","left"]),n("render end")}catch(r){n(r.name+":"+r.message)}};var u=function(e){return document.getElementById(e)}}),Model.pushStore=function(e){e.config={fields:[{name:"name",type:"string"},{name:"type",type:"string"},{name:"coordinate",type:"array"},{name:"description",type:"string"},{name:"cost_time",type:"number"},{name:"picture",type:"string"}]}},Model.waitStore=function(e){e.config={fields:[{name:"id",type:"number"},{name:"name",type:"string"},{name:"type",type:"string"},{name:"coordinate",type:"array"},{name:"description",type:"string"},{name:"num_perhour",type:"number"},{name:"waiting_queue",type:"array"},{name:"picture",type:"string"}]}};